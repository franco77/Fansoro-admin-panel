<?php $this->partial('head',array()); ?>
<?php $this->partial('navigation',array()); ?>
<?php if(Session::exists('user')){ ?>
	<div id="wrapper">
        <div id="page-wrapper">

            <div class="container-fluid">

                <!-- Page Heading -->
                <div class="row mt60">
                    <div class="col-lg-12">
                        <a
                          class="btn btn-primary"
                          href="<?php echo $this->Url().'/action/compress/public/'.Token::generate();?>">
                          <?php echo Panel::$lang['Zip_Public'];?>
                        </a>
                        <a
                          class="btn btn-success"
                          href="<?php echo $this->Url().'/action/compress/storage/'.Token::generate();?>">
                          <?php echo Panel::$lang['Zip_Storage'];?>
                        </a>
                        <a
                          class="btn btn-warning"
                          href="<?php echo $this->Url().'/action/compress/themes/'.Token::generate();?>">
                          <?php echo Panel::$lang['Zip_Themes'];?>
                        </a>
                    </div>
                </div>
                <!-- /.row -->

                <div class="row">
                    <div class="col-lg-12">
                        <div class="table-responsive panel panel-primary filterable">
							<div class="panel-heading">
								<h3 class="panel-title">Backups</h3>
								<div class="pull-right">
									<button class="btn btn-default btn-xs btn-filter"><span class="glyphicon glyphicon-filter"></span> Filter</button>
								</div>
							</div>
							<table class="table">
								<thead>
									<tr class="filters">
										<th><input type="text" class="form-control" placeholder="<?php echo Panel::$lang['Name'];?>" disabled></th>
										<th class="hidden-xs"><input type="text" class="form-control" placeholder="<?php echo Panel::$lang['Directory'];?>" disabled></th>
										<th class="hidden-xs hidden-sm"><input type="text" class="form-control" placeholder="<?php echo Panel::$lang['Extension'];?>" disabled></th>
										<th><input type="text" class="form-control" placeholder="<?php echo Panel::$lang['Options'];?>" disabled style="text-align: right;"></th>
									</tr>
								</thead>
								<tbody>
								  <?php
									// generate token
									$token = Token::generate();

									foreach ($content as $item) {
									// size
									$size = $this->fileSize($item);
									// onloy show pages dir
									$file = str_replace(THEMES, '', $item);
									// get extension
									$extension = File::ext($file);
									// get name
									$name = File::name($file);
									// directory
									$directory = str_replace($name.'.'.$extension, '', $file);
									// show
									echo '
									  <tr>
										  <td>'.$name.'.'.$extension.'</td>
										  <td class="hidden-xs">'.$size.'</td>
										  <td class="hidden-xs hidden-sm">'.$extension.'</td>
										  <td style="text-align:right">
											<div class="btn-group">
											<a  class="btn btn-warning"
											  href="'.$this->Url().'/action/backups/rename/'.$token.'/'.base64_encode($item).'"
											  title="'.Panel::$lang['Rename_File'].'">
												<i class="fa fa-file-excel-o"></i>
											</a>
											<a  class="btn btn-success"
											  href="'.$this->Url().'/action/backups/download/'.$token.'/'.base64_encode($item).'"
											  title="'.Panel::$lang['Remove_File'].'">
												<i class="fa fa-upload"></i>
											</a>
											<a  class="btn btn-danger"
											  onclick="return confirm(\''.Panel::$lang['Are_you_sure_to_delete'].' !\')"
											  href="'.$this->Url().'/action/backups/removefile/'.$token.'/'.base64_encode($item).'"
											  title="'.Panel::$lang['Remove_File'].'">
												<i class="fa fa-trash-o"></i>
											</a>
											</div>
										  </td>
									  </tr>
									';
									};
									?>
								</tbody>
							</table>
						</div>
                    </div>
                    
                </div>
                <!-- /.row -->

            </div>
            <!-- /.container-fluid mt60 -->

        </div>
        <!-- /#page-wrapper -->
    
    </div>
    <!-- /#wrapper -->
<?php }; ?>
<?php $this->partial('footer',array()); ?>
