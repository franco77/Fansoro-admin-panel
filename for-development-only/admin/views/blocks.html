<?php $this->partial('head',array()); ?>
<?php $this->partial('navigation',array()); ?>
<?php if(Session::exists('user')){ ?>
	<div id="wrapper">
        <div id="page-wrapper">

            <div class="container-fluid">

                <!-- Page Heading -->
                <div class="row mt60">
                    <div class="col-lg-6">
						<?php echo $prev; ?>
						<span class="btn btn-primary"><?php echo $offset;?> - <?php echo $total;?></span>
						<?php echo $next; ?>
                    </div>
					<div class="col-lg-6 right">
						<form method="post" actiom="" class="form-inline" id="search">
							<div class="form-group">
							  <input type="search" class="form-control" id="searchthis" data-search="blocks" placeholder="Search..." required/>
							</div>
						</form>
                    </div>
                </div>
                <!-- /.row -->

                <div class="row">
                    <div class="col-lg-12">
                        <div class="table-responsive panel panel-primary filterable">
				<div class="panel-heading">
					<h3 class="panel-title">Blocks</h3>
					<div class="pull-right">
						<button class="btn btn-default btn-xs btn-filter"><span class="glyphicon glyphicon-filter"></span> Filter</button>
					</div>
				</div>
				<table class="table">
					<thead>
						<tr class="filters">
							<th><input type="text" class="form-control" placeholder="<?php echo Panel::$lang['Name'];?>" disabled></th>
							<th><input type="text" class="form-control" placeholder="<?php echo Panel::$lang['Directory'];?>" disabled></th>
							<th><input type="text" class="form-control" placeholder="<?php echo Panel::$lang['Extension'];?>" disabled></th>
							<th><input type="text" class="form-control" placeholder="<?php echo Panel::$lang['Options'];?>" disabled></th>
						</tr>
					</thead>
					<tbody>
						<?php
						  // generate token
						  $token = Token::generate();
	
						  foreach ($content as $item) {
							// size
							$size = $this->fileSize($item);
							// only show pages dir
							$file = str_replace(STORAGE.'/', '', $item);
							// get extension
							$extension = File::ext($file);
							// get name
							$name = File::name($file);
							// directory
							$directory = str_replace($name.'.'.$extension, '', $file);
							// show
							echo '
							  <tr>
								<td>'.$name.'</td>
								<td>'.$directory.'</td>
								<td class="hide-for-mobile">'.$extension.'</td>
								<td class="right">
								  <div class="btn-group">
									<a  class="btn btn-primary"
										href="'.$this->Url().'/action/edit/'.$token.'/'.base64_encode($item).'"
										title="'.Panel::$lang['Edit_File'].'">
										  <i class="fa fa-pencil-square-o"></i>
									</a>
									<a  class="btn btn-warning"
										href="'.$this->Url().'/action/rename/'.$token.'/'.base64_encode($item).'"
										title="'.Panel::$lang['Rename_File'].'">
										  <i class="fa fa-file-excel-o"></i>
									</a>
									<a  class="btn btn-danger"
										onclick="return confirm(\''.Panel::$lang['Are_you_sure_to_delete'].' !\')"
										href="'.$this->Url().'/action/removefile/'.$token.'/'.base64_encode($item).'"
										title="'.Panel::$lang['Remove_File'].'">
										  <i class="fa fa-trash-o"></i>
									</a>
								  </div>
								</td>
							  </tr>';
						  }
						?>
					</tbody>
				</table>
			</div>
                    </div>

                </div>
                <!-- /.row -->

				<div class="row">
					<div class="col-lg-12">
						<a class="btn btn-primary" href="<?php echo $this->Url().'/action/newfile/'.$token.'/'.base64_encode('blocks')?>">
						<?php echo Panel::$lang['New_File'];?>
						</a>
					</div>
				</div>

            </div>
            <!-- /.container-fluid mt60 -->

        </div>
        <!-- /#page-wrapper -->

    </div>
    <!-- /#wrapper -->
<?php }; ?>
<?php $this->partial('footer',array()); ?>
